{"version":3,"sources":["components/SignForm.js","components/Header.js","components/ActivityForm.js","components/Statistics.js","components/Dashboard.js","services/userService.js","services/signIn.js","components/Main.js","App.js","index.js","utils/dateFunctions.js"],"names":["SignForm","active","setNotification","handleSignIn","handleSignUp","Form","onSubmit","event","preventDefault","username","target","value","password","length","message","color","setTimeout","credentials","FormGroup","Label","for","Input","type","name","id","placeholder","Button","className","Header","handleSignOut","onClick","DatePicker","require","ActivityForm","addActivity","start","startAdress","end","endAdress","date","datepicker","dateFormat","Statistics","activities","period","handlePeriodChange","onChange","checked","Math","round","reduce","a","b","distance","total","Table","bordered","sort","day","map","i","Date","getFullYear","getMonth","getDate","generateStats","Dashboard","getActivities","useState","setPeriod","useEffect","axios","baseURL","token","signUp","post","response","data","setToken","newToken","get","headers","Authorization","newActivity","signIn","Main","user","setUser","setActive","notification","loggedStorageUser","window","localStorage","getItem","JSON","parse","userService","selectActiveClick","signInService","loggedUser","setItem","stringify","removeItem","newActivityToAttach","newDate","newDateTime","getTime","startOfWeek","endOfWeek","concat","style","ButtonToggle","size","App","ReactDOM","render","document","getElementById","now","getDay","module","exports"],"mappings":"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","file":"static/js/main.b9ee3715.chunk.js","sourcesContent":["import React from 'react'\nimport { Form, FormGroup, Label, Input, Button } from 'reactstrap'\n\nconst SignForm = ({ active, setNotification, handleSignIn, handleSignUp }) => {\n  // --- SUBMIT FUNCTION DEPENDING ON THE TYPE OF ACTION (SIGN UP / SIGN IN)\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    const username = event.target.username.value\n    const password = event.target.password.value\n\n    if (username.length < 8 || password.length < 8) {\n      setNotification({\n        message:\n          'Both password and username should be at least 8 characters long',\n        color: 'red',\n      })\n      return setTimeout(() => {\n        setNotification('')\n      }, 5000)\n    }\n    const credentials = {\n      username,\n      password,\n    }\n\n    if (active === 'SIGN UP') {\n      handleSignUp(credentials)\n    } else if (active === 'SIGN IN') {\n      handleSignIn(credentials)\n    }\n  }\n  return (\n    <Form onSubmit={handleSubmit}>\n      <FormGroup>\n        <Label for=\"username\">Username</Label>\n        <Input\n          type=\"text\"\n          name=\"username\"\n          id=\"username\"\n          placeholder=\"min. 8 characters\"\n        />\n      </FormGroup>\n      <FormGroup>\n        <Label for=\"examplePassword\">Password</Label>\n        <Input\n          type=\"password\"\n          name=\"password\"\n          id=\"password\"\n          placeholder=\"min. 8 characters\"\n        />\n      </FormGroup>\n      <Button\n        type=\"submit\"\n        color={active === 'SIGN UP' ? 'primary' : 'secondary'}\n        className=\"submit-button\"\n      >\n        {active === 'SIGN UP' ? 'SIGN UP' : 'SIGN IN'}\n      </Button>\n    </Form>\n  )\n}\n\nexport default SignForm\n","import '../styles/Header.css'\nimport React from 'react'\nimport { Button } from 'reactstrap'\n\nconst Header = ({ username, handleSignOut }) => {\n  return (\n    <div id=\"header-container\">\n      <p>{username}</p>\n      <Button color=\"primary\" onClick={handleSignOut}>\n        LOG OUT\n      </Button>\n    </div>\n  )\n}\n\nexport default Header\n","import '../styles/ActivityForm.css'\nimport React from 'react'\nimport { Form, FormGroup, Label, Input, Button } from 'reactstrap'\nlet DatePicker = require('reactstrap-date-picker')\n\nconst ActivityForm = ({ addActivity }) => {\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    addActivity({\n      start: event.target.startAdress.value,\n      end: event.target.endAdress.value,\n      date: event.target.datepicker.value,\n    })\n    event.target.startAdress.value = ''\n    event.target.endAdress.value = ''\n  }\n  return (\n    <Form id=\"activity-form\" onSubmit={handleSubmit}>\n      <h3>Add new activity</h3>\n      <FormGroup>\n        <Label for=\"startAdress\" id=\"start-adress-label\">\n          <b>Start adress</b> in format like: \"Plac Europejski 2, Warszawa,\n          Polska\"\n        </Label>\n        <Input\n          type=\"text\"\n          name=\"startAdress\"\n          id=\"startAdress\"\n          placeholder=\"Adress in format: Street nr, city, country\"\n        />\n      </FormGroup>\n      <FormGroup>\n        <Label for=\"endAdress\" id=\"end-adress-label\">\n          <b>End adress</b> in format like: \"Plac Europejski 2, Warszawa,\n          Polska\"\n        </Label>\n        <Input\n          type=\"text\"\n          name=\"endAdress\"\n          id=\"endAdress\"\n          placeholder=\"Adress in format: Street nr, city, country\"\n        />\n      </FormGroup>\n      <FormGroup>\n        <Label for=\"datepicker\" id=\"datepicker\">\n          <b>Choose the date</b>\n        </Label>\n        <DatePicker id=\"datepicker\" name=\"datepicker\" dateFormat=\"YYYY-MM-DD\" />\n      </FormGroup>\n      <br></br>\n      <b>Calculate distance and save!</b>\n      <br></br>\n      <Button color=\"primary\" type=\"submit\">\n        GO\n      </Button>\n    </Form>\n  )\n}\n\nexport default ActivityForm\n","import '../styles/Statistics.css'\nimport React from 'react'\nimport { Table, Input } from 'reactstrap'\n\nconst Statistics = ({ activities, period, handlePeriodChange }) => {\n  if (!activities || !activities.length) return null\n\n  const transformDate = (date) => {\n    date = new Date(date)\n    return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`\n  }\n\n  const total = (period) => {\n    if (period === 'week') {\n      return `${Math.round(activities.reduce((a, b) => a + b.distance, 0))} km`\n    } else if (period === 'month') {\n      return `${Math.round(activities.reduce((a, b) => a + b.total, 0))} km`\n    }\n  }\n\n  const generateStats = (period) => {\n    if (period === 'month' && activities[0]) {\n      return (\n        <Table bordered id=\"statistics-table\">\n          <thead>\n            <tr>\n              <th>Day</th>\n              <th>Distance</th>\n            </tr>\n          </thead>\n          <tbody>\n            {activities\n              .sort((a, b) => a.day - b.day)\n              .map((a, i) => {\n                return (\n                  <tr key={i}>\n                    <td>{a.day}</td>\n                    <td>{a.total} km</td>\n                  </tr>\n                )\n              })}\n          </tbody>\n        </Table>\n      )\n    } else if (period === 'week') {\n      return (\n        <Table bordered id=\"statistics-table\">\n          <thead>\n            <tr>\n              <th>Date</th>\n              <th>Start</th>\n              <th>End</th>\n              <th>Distance</th>\n            </tr>\n          </thead>\n          <tbody>\n            {activities.map((a) => (\n              <tr key={a.id}>\n                <td>{transformDate(a.date)}</td>\n                <td>{a.start}</td>\n                <td>{a.end}</td>\n                <td>{a.distance} km</td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      )\n    }\n  }\n\n  return (\n    <div id=\"statistics-container\">\n      <form onChange={handlePeriodChange}>\n        <label for=\"radio-week\">Week</label>\n        <input\n          type=\"radio\"\n          name=\"period\"\n          value=\"week\"\n          id=\"radio-week\"\n          checked={period === 'week'}\n        ></input>\n        <br></br>\n        <label for=\"radio-month\">Month</label>\n        <input\n          type=\"radio\"\n          name=\"period\"\n          value=\"month\"\n          id=\"radio-month\"\n          checked={period === 'month'}\n        ></input>\n      </form>\n      <h3>{period === 'week' ? 'This week' : 'This month'}</h3>\n      <h4>Total: {total(period)}</h4>\n      {generateStats(period)}\n    </div>\n  )\n}\n\nexport default Statistics\n","import '../styles/Dashboard.css'\nimport React, { useEffect, useState } from 'react'\nimport ActivityForm from './ActivityForm'\nimport Statistics from './Statistics'\n\nconst Dashboard = ({ getActivities, addActivity, activities }) => {\n\n  const [period, setPeriod] = useState('week')\n\n  useEffect(() => {\n   getActivities(period)\n  }, [period])\n\n  const handlePeriodChange = (event) => {\n    setPeriod(event.target.value)\n  }\n\n  return (\n    <div id=\"dashboard-container\">\n      <ActivityForm addActivity={addActivity} />\n      <Statistics activities={activities} period={period} handlePeriodChange={handlePeriodChange} />\n    </div>\n  )\n}\n\nexport default Dashboard\n","const axios = require('axios')\nconst baseURL = 'http://localhost:3001/api/users'\n\n// -- TOKEN USED IN SOME REQUESTS\n\nlet token = null\n\nconst setToken = (newToken) => {\n  token = `bearer ${newToken}`\n}\n\n// --- CREATE A NEW USER\n\nconst signUp = async (credentials) => {\n  const response = await axios.post(baseURL, credentials)\n  return response.data\n}\n\n// -- GET ACTIVITIES OF THE USER\n\nconst getActivities = async (period) => {\n  const response = await axios.get(`${baseURL}/activities/${period}`, {\n    headers: { Authorization: token },\n  })\n  return response.data\n}\n\n// -- ADD A NEW ACTIVITY\n\nconst addActivity = async (newActivity) => {\n  const response = await axios.post(`${baseURL}/activities/`, newActivity, {\n    headers: { Authorization: token },\n  })\n  return response.data\n}\n\nexport default {\n  signUp,\n  setToken,\n  getActivities,\n  addActivity,\n}\n","import axios from 'axios'\n\nconst url = 'http://localhost:3001/api/signin'\n\nconst signIn = async (credentials) => {\n  const response = await axios.post(url, credentials)\n  return response.data\n}\n\nexport default {\n  signIn,\n}\n","import '../styles/Main.css'\nimport date from '../utils/dateFunctions'\nimport React, { useState, useEffect } from 'react'\nimport { ButtonToggle } from 'reactstrap'\nimport SignForm from './SignForm'\nimport Header from './Header'\nimport Dashboard from './Dashboard'\nimport userService from '../services/userService'\nimport signInService from '../services/signIn'\n\nconst Main = () => {\n  const [user, setUser] = useState({})\n  const [active, setActive] = useState('SIGN IN')\n  const [notification, setNotification] = useState({ message: '', color: '' })\n\n  // -- CHECK IF THE USER HAS ALREADY BEEN LOGGED IN --\n\n  useEffect(() => {\n    const loggedStorageUser = window.localStorage.getItem('loggedUser')\n    if (loggedStorageUser) {\n      const user = JSON.parse(loggedStorageUser)\n      setUser(user)\n      userService.setToken(user.token)\n    }\n  }, [])\n\n  // -- HANDLERS --\n\n  const selectActiveClick = (event) => {\n    setActive(event.target.value)\n  }\n\n  const handleSignIn = async (credentials) => {\n    try {\n      const loggedUser = await signInService.signIn(credentials)\n      userService.setToken(loggedUser.token)\n      setUser({\n        ...loggedUser,\n      })\n      window.localStorage.setItem('loggedUser', JSON.stringify(loggedUser))\n    } catch (e) {\n      setNotification({\n        color: 'red',\n        message: 'You passed wrong credentials',\n      })\n      setTimeout(() => {\n        setNotification('')\n      }, 5000)\n    }\n  }\n\n  const handleSignUp = async (credentials) => {\n    window.localStorage.removeItem('loggedUser')\n    try {\n      await userService.signUp(credentials)\n      setNotification({\n        message: 'New account created, you can now log in',\n        color: 'green',\n      })\n      setTimeout(() => {\n        setNotification('')\n      }, 5000)\n    } catch (e) {\n      setNotification({\n        message: 'This username is already in use',\n        color: 'red',\n      })\n      setTimeout(() => {\n        setNotification('')\n      }, 5000)\n    }\n  }\n\n  const handleSignOut = () => {\n    userService.setToken(null)\n    window.localStorage.removeItem('loggedUser')\n    setUser({})\n  }\n\n  const getActivities = async (period) => {\n    const activities = await userService.getActivities(period)\n    setUser({\n      ...user,\n      activities: activities.map((a) => {\n        return period === 'week'\n          ? {\n              ...a,\n              date: new Date(a.date),\n              distance: +a.distance,\n            }\n          : {\n              ...a,\n              total: +a.total,\n            }\n      }),\n    })\n  }\n\n  const addActivity = async (newActivity) => {\n    try {\n      const newActivityToAttach = await userService.addActivity(newActivity)\n      if (newActivityToAttach) {\n        const newDate = new Date(newActivityToAttach.date)\n        const newDateTime = newDate.getTime()\n        const startOfWeek = date.startOfWeek().getTime()\n        const endOfWeek = date.endOfWeek().getTime()\n\n        if (newDateTime > startOfWeek && newDateTime < endOfWeek) {\n          setUser({\n            ...user,\n            activities: user.activities.concat({\n              ...newActivityToAttach,\n              date: new Date(newActivityToAttach.date),\n              distance: +newActivityToAttach.distance,\n            }),\n          })\n        }\n        setNotification({\n          message: `Activity saved. Distance: ${newActivityToAttach.distance} km`,\n          color: 'green',\n        })\n        setTimeout(() => setNotification(''), 5000)\n      } else {\n        setNotification({\n          message: 'Error with last activity',\n          color: 'red',\n        })\n        setTimeout(() => {\n          setNotification('')\n        }, 5000)\n      }\n    } catch (e) {\n      setNotification({\n        message: 'Fill every field and try again',\n        color: 'red',\n      })\n      setTimeout(() => {\n        setNotification({\n          message: '',\n          color: '',\n        })\n      }, 5000)\n    }\n  }\n\n  // -- WHEN USER IS NOT LOGGED IN, DISPLAY SIGN FORM\n\n  if (!user.username) {\n    return (\n      <div id=\"main-sign-container\">\n        <h1>Fitofit</h1>\n        <div className=\"buttons-container\">\n          <ButtonToggle\n            color=\"secondary\"\n            size=\"lg\"\n            value=\"SIGN IN\"\n            onClick={selectActiveClick}\n          >\n            SIGN IN\n          </ButtonToggle>\n          {'  '}\n          <ButtonToggle\n            color=\"primary\"\n            size=\"lg\"\n            value=\"SIGN UP\"\n            onClick={selectActiveClick}\n          >\n            SIGN UP\n          </ButtonToggle>\n        </div>\n        <div id=\"main-forms-container\">\n          {notification ? (\n            <h5 style={{ color: notification.color }}>\n              {notification.message}\n            </h5>\n          ) : null}\n          <SignForm\n            active={active}\n            setNotification={setNotification}\n            handleSignIn={handleSignIn}\n            handleSignUp={handleSignUp}\n          />\n        </div>\n      </div>\n    )\n  } else {\n    // -- WHEN USER IS LOGGED IN, DISPLAY USER'S PANEL\n\n    return (\n      <div id=\"main-logged-container\">\n        <Header username={user.username} handleSignOut={handleSignOut} />\n        <h4 style={{ color: notification.color }} id=\"main-logged-notification\">\n          {notification.message}\n        </h4>\n        <Dashboard\n          getActivities={getActivities}\n          addActivity={addActivity}\n          activities={user.activities}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Main\n","import React from 'react'\nimport Main from './components/Main'\n\nconst App = () => {\n  return (\n    <div id=\"home\">\n      <Main />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './styles/index.css'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n","const now = new Date()\nconst startOfWeek = () =>\n  new Date(now.getFullYear(), now.getMonth(), now.getDate() - now.getDay() + 1)\nconst endOfWeek = () =>\n  new Date(now.getFullYear(), now.getMonth(), startOfWeek().getDate() + 7)\n\nmodule.exports = {\n  startOfWeek,\n  endOfWeek,\n}\n"],"sourceRoot":""}