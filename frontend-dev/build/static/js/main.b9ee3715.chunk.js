(this["webpackJsonpfrontend-dev"]=this["webpackJsonpfrontend-dev"]||[]).push([[0],{111:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(16),c=n.n(a),s=(n(69),n(70),n(11)),i=n.n(s),o=n(14),d=n(15),u=n(21),l=(n(72),n(30)),j=n.n(l),h=n(38),b=n(33),O=n(34),f=n(35),p=n(36),x=n(19),v=n(6),m=function(e){var t=e.active,n=e.setNotification,r=e.handleSignIn,a=e.handleSignUp;return Object(v.jsxs)(b.a,{onSubmit:function(e){e.preventDefault();var c=e.target.username.value,s=e.target.password.value;if(c.length<8||s.length<8)return n({message:"Both password and username should be at least 8 characters long",color:"red"}),setTimeout((function(){n("")}),5e3);var i={username:c,password:s};"SIGN UP"===t?a(i):"SIGN IN"===t&&r(i)},children:[Object(v.jsxs)(O.a,{children:[Object(v.jsx)(f.a,{for:"username",children:"Username"}),Object(v.jsx)(p.a,{type:"text",name:"username",id:"username",placeholder:"min. 8 characters"})]}),Object(v.jsxs)(O.a,{children:[Object(v.jsx)(f.a,{for:"examplePassword",children:"Password"}),Object(v.jsx)(p.a,{type:"password",name:"password",id:"password",placeholder:"min. 8 characters"})]}),Object(v.jsx)(x.a,{type:"submit",color:"SIGN UP"===t?"primary":"secondary",className:"submit-button",children:"SIGN UP"===t?"SIGN UP":"SIGN IN"})]})},g=(n(76),function(e){var t=e.username,n=e.handleSignOut;return Object(v.jsxs)("div",{id:"header-container",children:[Object(v.jsx)("p",{children:t}),Object(v.jsx)(x.a,{color:"primary",onClick:n,children:"LOG OUT"})]})}),w=(n(77),n(78),n(79)),k=function(e){var t=e.addActivity;return Object(v.jsxs)(b.a,{id:"activity-form",onSubmit:function(e){e.preventDefault(),t({start:e.target.startAdress.value,end:e.target.endAdress.value,date:e.target.datepicker.value}),e.target.startAdress.value="",e.target.endAdress.value=""},children:[Object(v.jsx)("h3",{children:"Add new activity"}),Object(v.jsxs)(O.a,{children:[Object(v.jsxs)(f.a,{for:"startAdress",id:"start-adress-label",children:[Object(v.jsx)("b",{children:"Start adress"}),' in format like: "Plac Europejski 2, Warszawa, Polska"']}),Object(v.jsx)(p.a,{type:"text",name:"startAdress",id:"startAdress",placeholder:"Adress in format: Street nr, city, country"})]}),Object(v.jsxs)(O.a,{children:[Object(v.jsxs)(f.a,{for:"endAdress",id:"end-adress-label",children:[Object(v.jsx)("b",{children:"End adress"}),' in format like: "Plac Europejski 2, Warszawa, Polska"']}),Object(v.jsx)(p.a,{type:"text",name:"endAdress",id:"endAdress",placeholder:"Adress in format: Street nr, city, country"})]}),Object(v.jsxs)(O.a,{children:[Object(v.jsx)(f.a,{for:"datepicker",id:"datepicker",children:Object(v.jsx)("b",{children:"Choose the date"})}),Object(v.jsx)(w,{id:"datepicker",name:"datepicker",dateFormat:"YYYY-MM-DD"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Calculate distance and save!"}),Object(v.jsx)("br",{}),Object(v.jsx)(x.a,{color:"primary",type:"submit",children:"GO"})]})},y=(n(111),n(53)),S=function(e){var t=e.activities,n=e.period,r=e.handlePeriodChange;if(!t||!t.length)return null;return Object(v.jsxs)("div",{id:"statistics-container",children:[Object(v.jsxs)("form",{onChange:r,children:[Object(v.jsx)("label",{for:"radio-week",children:"Week"}),Object(v.jsx)("input",{type:"radio",name:"period",value:"week",id:"radio-week",checked:"week"===n}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{for:"radio-month",children:"Month"}),Object(v.jsx)("input",{type:"radio",name:"period",value:"month",id:"radio-month",checked:"month"===n})]}),Object(v.jsx)("h3",{children:"week"===n?"This week":"This month"}),Object(v.jsxs)("h4",{children:["Total: ",function(e){return"week"===e?"".concat(Math.round(t.reduce((function(e,t){return e+t.distance}),0))," km"):"month"===e?"".concat(Math.round(t.reduce((function(e,t){return e+t.total}),0))," km"):void 0}(n)]}),function(e){return"month"===e&&t[0]?Object(v.jsxs)(y.a,{bordered:!0,id:"statistics-table",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Day"}),Object(v.jsx)("th",{children:"Distance"})]})}),Object(v.jsx)("tbody",{children:t.sort((function(e,t){return e.day-t.day})).map((function(e,t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.day}),Object(v.jsxs)("td",{children:[e.total," km"]})]},t)}))})]}):"week"===e?Object(v.jsxs)(y.a,{bordered:!0,id:"statistics-table",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Date"}),Object(v.jsx)("th",{children:"Start"}),Object(v.jsx)("th",{children:"End"}),Object(v.jsx)("th",{children:"Distance"})]})}),Object(v.jsx)("tbody",{children:t.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:(t=e.date,t=new Date(t),"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()))}),Object(v.jsx)("td",{children:e.start}),Object(v.jsx)("td",{children:e.end}),Object(v.jsxs)("td",{children:[e.distance," km"]})]},e.id);var t}))})]}):void 0}(n)]})},A=function(e){var t=e.getActivities,n=e.addActivity,a=e.activities,c=Object(r.useState)("week"),s=Object(u.a)(c,2),i=s[0],o=s[1];Object(r.useEffect)((function(){t(i)}),[i]);return Object(v.jsxs)("div",{id:"dashboard-container",children:[Object(v.jsx)(k,{addActivity:n}),Object(v.jsx)(S,{activities:a,period:i,handlePeriodChange:function(e){o(e.target.value)}})]})},I=n(29),N="http://localhost:3001/api/users",D=null,T={signUp:function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post(N,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){D="bearer ".concat(e)},getActivities:function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("".concat(N,"/activities/").concat(t),{headers:{Authorization:D}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addActivity:function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("".concat(N,"/activities/"),t,{headers:{Authorization:D}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=n(29),P=n.n(U),G={signIn:function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post("http://localhost:3001/api/signin",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=Object(r.useState)({}),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("SIGN IN"),s=Object(u.a)(c,2),l=s[0],b=s[1],O=Object(r.useState)({message:"",color:""}),f=Object(u.a)(O,2),p=f[0],x=f[1];Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);a(t),T.setToken(t.token)}}),[]);var w=function(e){b(e.target.value)},k=function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.signIn(t);case 3:n=e.sent,T.setToken(n.token),a(Object(o.a)({},n)),window.localStorage.setItem("loggedUser",JSON.stringify(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),x({color:"red",message:"You passed wrong credentials"}),setTimeout((function(){x("")}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.localStorage.removeItem("loggedUser"),e.prev=1,e.next=4,T.signUp(t);case 4:x({message:"New account created, you can now log in",color:"green"}),setTimeout((function(){x("")}),5e3),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),x({message:"This username is already in use",color:"red"}),setTimeout((function(){x("")}),5e3);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getActivities(t);case 2:r=e.sent,a(Object(o.a)(Object(o.a)({},n),{},{activities:r.map((function(e){return"week"===t?Object(o.a)(Object(o.a)({},e),{},{date:new Date(e.date),distance:+e.distance}):Object(o.a)(Object(o.a)({},e),{},{total:+e.total})}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(i.a.mark((function e(t){var r,c,s,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.addActivity(t);case 3:(r=e.sent)?(c=new Date(r.date),s=c.getTime(),d=j.a.startOfWeek().getTime(),u=j.a.endOfWeek().getTime(),s>d&&s<u&&a(Object(o.a)(Object(o.a)({},n),{},{activities:n.activities.concat(Object(o.a)(Object(o.a)({},r),{},{date:new Date(r.date),distance:+r.distance}))})),x({message:"Activity saved. Distance: ".concat(r.distance," km"),color:"green"}),setTimeout((function(){return x("")}),5e3)):(x({message:"Error with last activity",color:"red"}),setTimeout((function(){x("")}),5e3)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),x({message:"Fill every field and try again",color:"red"}),setTimeout((function(){x({message:"",color:""})}),5e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return n.username?Object(v.jsxs)("div",{id:"main-logged-container",children:[Object(v.jsx)(g,{username:n.username,handleSignOut:function(){T.setToken(null),window.localStorage.removeItem("loggedUser"),a({})}}),Object(v.jsx)("h4",{style:{color:p.color},id:"main-logged-notification",children:p.message}),Object(v.jsx)(A,{getActivities:S,addActivity:I,activities:n.activities})]}):Object(v.jsxs)("div",{id:"main-sign-container",children:[Object(v.jsx)("h1",{children:"Fitofit"}),Object(v.jsxs)("div",{className:"buttons-container",children:[Object(v.jsx)(h.a,{color:"secondary",size:"lg",value:"SIGN IN",onClick:w,children:"SIGN IN"}),"  ",Object(v.jsx)(h.a,{color:"primary",size:"lg",value:"SIGN UP",onClick:w,children:"SIGN UP"})]}),Object(v.jsxs)("div",{id:"main-forms-container",children:[p?Object(v.jsx)("h5",{style:{color:p.color},children:p.message}):null,Object(v.jsx)(m,{active:l,setNotification:x,handleSignIn:k,handleSignUp:y})]})]})},E=function(){return Object(v.jsx)("div",{id:"home",children:Object(v.jsx)(C,{})})};c.a.render(Object(v.jsx)(E,{}),document.getElementById("root"))},30:function(e,t){var n=new Date,r=function(){return new Date(n.getFullYear(),n.getMonth(),n.getDate()-n.getDay()+1)};e.exports={startOfWeek:r,endOfWeek:function(){return new Date(n.getFullYear(),n.getMonth(),r().getDate()+7)}}},69:function(e,t,n){},72:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){}},[[129,1,2]]]);
//# sourceMappingURL=main.b9ee3715.chunk.js.map